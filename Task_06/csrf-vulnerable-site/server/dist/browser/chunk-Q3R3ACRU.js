import{A as N,B as A,C as g,D as c,E as a,F as b,G as u,H as d,I as F,J as te,K as ne,L as O,M as j,N as C,O as oe,P as w,Q as ie,R as s,S as E,T as P,U as R,V as re,W as ae,X as se,Y as le,a as _,aa as ce,b as S,c as V,ca as me,d as W,ea as ue,f as Z,fa as de,h as $,i as J,j as K,ja as pe,k as M,ka as q,l as I,la as fe,m as B,ma as be,n as U,na as he,o as z,oa as ve,p as Q,pa as ke,q as X,qa as ge,r as l,ra as Ce,s as Y,t as p,ta as ye,u as f,v as ee,va as xe,w as v,y as k,z as T}from"./chunk-HDTFT2MX.js";var L=(()=>{let e=class e{constructor(){this.customStyle={color:"#064D9E",fontWeight:600},this.sanitizer=M(me),this.detailClick=new Y}set content(o){typeof o.abstract=="string"?this.book=S(_({},o),{abstract:this.sanitizer.bypassSecurityTrustHtml(o.abstract)}):this.book=o}handleDetailClick(o){o.preventDefault(),console.log("Click Details-Link:",o),this.detailClick.emit(this.book)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=f({type:e,selectors:[["app-book-card"]],inputs:{content:"content"},outputs:{detailClick:"detailClick"},decls:7,vars:5,consts:[["href","",3,"click"],[3,"innerHTML"]],template:function(n,r){n&1&&(u(0,"h3"),s(1),d(),u(2,"h4"),s(3),d(),u(4,"a",0),oe("click",function(y){return r.handleDetailClick(y)}),s(5,"Details"),d(),F(6,"p",1)),n&2&&(l(),E(r.book.title),l(),ie(r.customStyle),l(),E(r.book.author),l(3),j("innerHTML",r.book.abstract,Q))},styles:["[_nghost-%COMP%]{display:inline-block;border-radius:2px;margin:1rem;padding:1rem;width:300px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:all .3s cubic-bezier(.25,.8,.25,1)}[_nghost-%COMP%]:hover{box-shadow:0 14px 28px #00000040,0 10px 10px #00000038}"]});let t=e;return t})();var _e=(()=>{let e=class e{transform(o,n){return n?o?o.filter(r=>r.title.toLocaleLowerCase().includes(n.toLocaleLowerCase())):[]:o||[]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275pipe=ee({name:"bookFilter",type:e,pure:!0});let t=e;return t})();function Se(t,e){let o=!e?.manualCleanup?e?.injector?.get(U)??M(U):null,n=Ie(e?.equal),r;e?.requireSync?r=z({kind:0},{equal:n}):r=z({kind:1,value:e?.initialValue},{equal:n});let m,y=t.subscribe({next:h=>r.set({kind:1,value:h}),error:h=>{r.set({kind:2,error:h}),m?.()},complete:()=>{m?.()}});if(e?.requireSync&&r().kind===0)throw new $(601,!1);return m=o?.onDestroy(y.unsubscribe.bind(y)),se(()=>{let h=r();switch(h.kind){case 1:return h.value;case 2:throw h.error;case 0:throw new $(601,!1)}},{equal:e?.equal})}function Ie(t=Object.is){return(e,i)=>e.kind===1&&i.kind===1&&t(e.value,i.value)}var x=(()=>{var e;let i=class i{constructor(n){W(this,e,"http://localhost:4730");this.http=n}getAll(){return this.http.get(`${V(this,e)}/books`)}getByIsbn(n){return this.http.get(`${V(this,e)}/books/${n}`)}create(n){return this.http.post("http://localhost:4730/books",n)}};e=new WeakMap,i.\u0275fac=function(r){return new(r||i)(K(ce))},i.\u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"});let t=i;return t})();function Be(t,e){if(t&1){let i=O();c(0,"app-book-card",3),C("detailClick",function(n){I(i);let r=w();return B(r.goToBookDetails(n))}),a()}if(t&2){let i=e.$implicit;g("content",i)}}var we=(()=>{let e=class e{constructor(o,n){this.bookApi=o,this.router=n,this.bookSearchTerm="",this.books=Se(this.bookApi.getAll())}goToBookDetails(o){this.router.navigate(["books","detail",o.isbn])}updateBookSearchTerm(o){this.bookSearchTerm=o.target.value}};e.\u0275fac=function(n){return new(n||e)(p(x),p(ue))},e.\u0275cmp=f({type:e,selectors:[["app-book"]],decls:7,vars:3,consts:[["type","search","placeholder","Filter your books...",1,"book-filter",3,"input"],["routerLink","new"],[3,"content"],[3,"detailClick","content"]],template:function(n,r){n&1&&(c(0,"input",0),C("input",function(y){return r.updateBookSearchTerm(y)}),a(),c(1,"div")(2,"a",1),s(3,"Create Book"),a()(),N(4,Be,1,1,"app-book-card",2,T),R(6,"bookFilter")),n&2&&(l(4),A(ae(6,0,r.books(),r.bookSearchTerm)))},dependencies:[L,de,_e],styles:[".book-filter[_ngcontent-%COMP%]{display:block;margin:1rem;padding:12px 20px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box}"]});let t=e;return t})();function Te(t,e){if(t&1&&(u(0,"h3"),s(1),d(),u(2,"h4"),s(3),d(),u(4,"section",0)(5,"p"),s(6),u(7,"i"),s(8),d()(),F(9,"img",1),d()),t&2){let i=e;l(),P(" ",i.title," "),l(2),P("ISBN - ",i.isbn),l(3),P(" ",i.abstract," "),l(2),E(i.author),l(),j("src",i.cover,X)("alt",i.title)}}var Ee=(()=>{let e=class e{constructor(o){this.bookApi=o}set isbn(o){this.book$=this.bookApi.getByIsbn(o)}};e.\u0275fac=function(n){return new(n||e)(p(x))},e.\u0275cmp=f({type:e,selectors:[["app-book-detail"]],inputs:{isbn:"isbn"},decls:2,vars:3,consts:[[1,"book-insights"],[1,"book-cover",3,"src","alt"]],template:function(n,r){if(n&1&&(v(0,Te,10,6),R(1,"async")),n&2){let m;k((m=re(1,1,r.book$))?0:-1,m)}},dependencies:[le],styles:["[_nghost-%COMP%]{display:block;margin:1rem}.book-insights[_ngcontent-%COMP%]{display:grid;grid-template-columns:2fr 1fr;gap:2rem}.book-cover[_ngcontent-%COMP%]{max-height:200px}"]});let t=e;return t})();var De=(t,e)=>confirm("Do you really want to leave?");function H(){return t=>{let e=t.value;return e&&/[0-9]+/.test(e)?{invalidAuthor:!0}:null}}function Ne(t,e){t&1&&(c(0,"small"),s(1," Please insert a title. "),a())}function Ae(t,e){t&1&&(c(0,"small"),s(1," Please insert an Author. "),a())}function Fe(t,e){t&1&&(c(0,"small"),s(1," Der Name eines Autors darf keine Zahlen beinhalten! "),a())}function Oe(t,e){if(t&1){let i=O();c(0,"label",1)(1,"span"),s(2,"Author"),a(),b(3,"input",11),v(4,Ae,2,0,"small"),v(5,Fe,2,0,"small"),a(),c(6,"button",12),C("click",function(){let n=I(i).$index,r=w();return B(r.deleteAuthor(n))}),s(7," Remove Author "),a()}if(t&2){let i=e.$implicit,o=e.$index;l(3),g("formControlName",o),l(),k(i!=null&&i.dirty&&(i!=null&&i.hasError("required"))?4:-1),l(),k(i!=null&&i.dirty&&(i!=null&&i.hasError("invalidAuthor"))?5:-1)}}function je(t,e){if(t&1&&(c(0,"div")(1,"h2"),s(2,"Successfully submitted"),a(),b(3,"app-book-card",13),a()),t&2){let i=w();l(3),g("content",i.newBook)}}var Me=(()=>{let e=class e{constructor(o,n){this.formBuilder=o,this.bookApiService=n,this.submitted=!1,this.form=this.formBuilder.nonNullable.group({title:["",[q.required]],subtitle:[""],authors:this.formBuilder.array([["",[q.required,H()]]]),abstract:[""],isbn:[""],cover:[""]})}submit(){let o=this.form.getRawValue().authors[0]||"n/a";this.bookApiService.create(S(_({},this.form.getRawValue()),{author:o})).pipe(Z(1)).subscribe(n=>{this.newBook=n,this.submitted=!0})}get authors(){return this.form.controls.authors}deleteAuthor(o){this.authors.removeAt(o)}addAuthor(){this.authors.push(new he("",[q.required,H()]))}};e.\u0275fac=function(n){return new(n||e)(p(ye),p(x))},e.\u0275cmp=f({type:e,selectors:[["app-book-new"]],decls:33,vars:4,consts:[[3,"ngSubmit","formGroup"],[1,"form-field"],["formControlName","isbn"],["formControlName","title"],["formControlName","subtitle"],["formArrayName","authors"],["type","button",3,"click"],["formControlName","abstract"],["formControlName","cover"],[1,"form-actions"],["type","submit",3,"disabled"],[3,"formControlName"],[3,"click"],[3,"content"]],template:function(n,r){if(n&1&&(c(0,"h2"),s(1,"New"),a(),c(2,"form",0),C("ngSubmit",function(){return r.submit()}),c(3,"label",1)(4,"span"),s(5,"ISBN"),a(),b(6,"input",2),a(),c(7,"label",1)(8,"span"),s(9,"Title"),a(),b(10,"input",3),v(11,Ne,2,0,"small"),a(),c(12,"label",1)(13,"span"),s(14,"Subtitle"),a(),b(15,"input",4),a(),te(16,5),N(17,Oe,8,3,null,null,T),ne(),c(19,"button",6),C("click",function(){return r.addAuthor()}),s(20," Author hinzuf\xFCgen "),a(),c(21,"label",1)(22,"span"),s(23,"Abstract"),a(),b(24,"input",7),a(),c(25,"label",1)(26,"span"),s(27,"Cover"),a(),b(28,"input",8),a(),c(29,"div",9)(30,"button",10),s(31,"Save"),a()()(),v(32,je,4,1,"div")),n&2){let m;l(2),g("formGroup",r.form),l(9),k((m=r.form.get("title"))!=null&&m.dirty&&((m=r.form.get("title"))!=null&&m.hasError("required"))?11:-1),l(6),A(r.authors.controls),l(13),g("disabled",r.form.invalid),l(2),k(r.submitted?32:-1)}},dependencies:[xe,ve,pe,fe,be,ke,Ce,ge,L],styles:["[_nghost-%COMP%]{display:block;margin:1rem}.form-field[_ngcontent-%COMP%]{display:block;margin-top:1rem}.form-field[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.form-field[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding:12px 20px 12px 6px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;min-width:250px}.form-field-hint[_ngcontent-%COMP%]{display:block;color:#3c3c3c}.form-actions[_ngcontent-%COMP%]{margin-top:1rem}"]});let t=e;return t})();var Dt=[{path:"",component:we},{path:"new",component:Me},{path:"detail/:isbn",component:Ee,canDeactivate:[De]}];export{Dt as bookRoutes};
