import{$ as q,C as M,D as n,E as o,F as p,L as $,N as f,P as k,R as r,S as A,U as g,V as h,Y as w,Z as H,_ as U,aa as v,ba as z,da as J,e as B,ea as c,f as I,fa as C,g as R,ga as K,ha as Q,i as G,ia as W,ja as E,k as m,l as j,la as P,m as V,ma as L,oa as N,pa as O,r as d,ra as D,sa as X,ta as Y,u as s,ua as Z,va as F,w as S,x as y,y as _}from"./chunk-HDTFT2MX.js";var ee=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s({type:e,selectors:[["app-about"]],decls:5,vars:0,consts:[["routerLink","/",1,"link-blue"]],template:function(i,l){i&1&&(n(0,"section")(1,"h1"),r(2,"This app is all about your books."),o(),n(3,"a",0),r(4,"This link demonstrates the redirect of '/' to '/about'"),o()())},dependencies:[C],styles:["[_nghost-%COMP%]{height:50vh;display:grid;align-items:center;justify-content:center;color:#064d9e}.link-blue[_ngcontent-%COMP%]{color:#064d9e}"]});let t=e;return t})();var x=(()=>{let e=class e{constructor(){this.isLoggedIn=new B(!1),this.isLoggedIn$=this.isLoggedIn.asObservable()}login(){this.isLoggedIn.next(!0)}logout(){this.isLoggedIn.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=G({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var T=(t,e)=>{let u=m(x),a=m(c);return u.isLoggedIn$.pipe(R(i=>{i||a.navigate(["/login"])}))};var te=(()=>{let e=class e{constructor(){this.http=m(v),this.router=m(c),this.userStateService=m(x),this.formBuilder=m(Y),this.views=0,this.form=this.formBuilder.nonNullable.group({name:[""],password:[""]})}submit(){let a=this.form.getRawValue();this.http.post("/login",a).pipe(I(1)).subscribe(i=>{this.userStateService.login(),console.log(i),this.router.navigate(["/profile"])})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s({type:e,selectors:[["app-login"]],decls:14,vars:1,consts:[[3,"ngSubmit","formGroup"],[1,"form-field"],["formControlName","name"],["formControlName","password"],[1,"form-actions"],["type","submit"]],template:function(i,l){i&1&&(n(0,"h2"),r(1,"New"),o(),n(2,"form",0),f("ngSubmit",function(){return l.submit()}),n(3,"label",1)(4,"span"),r(5,"Username"),o(),p(6,"input",2),o(),n(7,"label",1)(8,"span"),r(9,"Passwort"),o(),p(10,"input",3),o(),n(11,"div",4)(12,"button",5),r(13,"Login"),o()()()),i&2&&(d(2),M("formGroup",l.form))},dependencies:[F,N,E,P,L,O,D],styles:["[_nghost-%COMP%]{display:block;margin:1rem}.form-field[_ngcontent-%COMP%]{display:block;margin-top:1rem}.form-field[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem}.form-field[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{padding:12px 20px 12px 6px;border:1px solid #ccc;border-radius:4px;box-sizing:border-box;min-width:250px}.form-field-hint[_ngcontent-%COMP%]{display:block;color:#3c3c3c}.form-actions[_ngcontent-%COMP%]{margin-top:1rem}"]});let t=e;return t})();function pe(t,e){if(t&1&&(n(0,"div",0)(1,"h2"),r(2),g(3,"async"),o(),n(4,"p"),r(5),g(6,"async"),o()()),t&2){let u,a,i=k();d(2),A(((u=h(3,2,i.user$))==null?null:u.username)||"No Username provided"),d(3),A(((a=h(6,4,i.user$))==null?null:a.email)||"No Email provided")}}function ce(t,e){t&1&&(n(0,"div",0)(1,"h2"),r(2,"No data"),o(),n(3,"p"),r(4,"No data"),o()())}var ie=(()=>{let e=class e{constructor(){this.http=m(v),this.user$=this.http.get("/api/profile")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s({type:e,selectors:[["app-profile"]],decls:6,vars:3,consts:[[1,"profile"],["routerLink","edit"]],template:function(i,l){i&1&&(S(0,pe,7,6,"div",0),g(1,"async"),y(2,ce,5,0,"div",0),n(3,"div")(4,"a",1),r(5,"Edit Profile"),o()()),i&2&&_(h(1,1,l.user$)?0:2)},dependencies:[C,w],encapsulation:2});let t=e;return t})();var oe=(()=>{let e=class e{constructor(){this.http=m(v),this.formBuilder=m(Z),this.router=m(c),this.form=this.formBuilder.group({username:[""],email:[""],password:[""]})}onSubmit(){let a=new q().set("username",this.form.value.username||"").set("password",this.form.value.password||"").set("email",this.form.value.email||""),i=new U({"Content-Type":"application/x-www-form-urlencoded"});this.http.post("/api/profile",a.toString(),{headers:i}).subscribe(()=>{this.router.navigate(["/profile"])})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s({type:e,selectors:[["app-profile-edit"]],decls:15,vars:1,consts:[[3,"ngSubmit","formGroup"],["for","username"],["formControlName","username","type","text","id","username","name","username","required",""],["for","password"],["formControlName","password","type","password","id","password","name","password","required",""],["for","email"],["formControlName","email","type","email","id","email","name","email","required",""],["type","submit"]],template:function(i,l){i&1&&(n(0,"form",0),f("ngSubmit",function(){return l.onSubmit()}),n(1,"div")(2,"label",1),r(3,"Username:"),o(),p(4,"input",2),o(),n(5,"div")(6,"label",3),r(7,"Password:"),o(),p(8,"input",4),o(),n(9,"div")(10,"label",5),r(11,"Email:"),o(),p(12,"input",6),o(),n(13,"button",7),r(14,"Submit"),o()()),i&2&&M("formGroup",l.form)},dependencies:[F,N,E,P,L,X,O,D],encapsulation:2});let t=e;return t})();var ne=[{path:"",redirectTo:"/about",pathMatch:"full"},{path:"about",component:ee},{path:"login",component:te},{path:"profile",component:ie,canMatch:[T]},{path:"profile/edit",component:oe,canMatch:[T]},{path:"books",loadChildren:()=>import("./chunk-Q3R3ACRU.js").then(t=>t.bookRoutes),canMatch:[T]}];var re={providers:[z(),Q(ne,W())]};function de(t,e){if(t&1){let u=$();n(0,"li")(1,"a",2),r(2,"Profil"),o()(),n(3,"li")(4,"a",3),f("click",function(i){j(u);let l=k();return V(l.logout(i))}),r(5,"Logout"),o()()}}function ue(t,e){t&1&&(n(0,"li")(1,"a",4),r(2,"Login"),o()())}var ae=(()=>{let e=class e{constructor(){this.userStateService=m(x),this.router=m(c),this.isLoggedIn$=this.userStateService.isLoggedIn$}logout(a){a.preventDefault(),this.userStateService.logout(),this.router.navigate(["/login"])}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s({type:e,selectors:[["app-navigation"]],decls:10,vars:3,consts:[["routerLink","/books","routerLinkActive","active"],["routerLink","/about","routerLinkActive","active"],["routerLink","/profile","routerLinkActive","active"],[3,"click"],["routerLink","/login","routerLinkActive","active"]],template:function(i,l){i&1&&(n(0,"ul")(1,"li")(2,"a",0),r(3,"Books"),o()(),n(4,"li")(5,"a",1),r(6,"About"),o()(),S(7,de,6,0),g(8,"async"),y(9,ue,3,0,"li"),o()),i&2&&(d(7),_(h(8,1,l.isLoggedIn$)?7:9))},dependencies:[C,K,w],styles:["ul[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0;overflow:hidden;background-color:#333}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{float:left}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#fff;text-align:center;padding:14px 16px;text-decoration:none}ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:not(.active){background-color:#111}ul[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#4caf50}"]});let t=e;return t})();var me=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=s({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,l){i&1&&p(0,"app-navigation")(1,"router-outlet")},dependencies:[ae,J],encapsulation:2});let t=e;return t})();H(me,re).catch(t=>console.error(t));
